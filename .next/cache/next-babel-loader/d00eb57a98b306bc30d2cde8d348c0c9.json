{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _getIterator from \"@babel/runtime-corejs2/core-js/get-iterator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _css from \"@emotion/css\";\nvar _jsxFileName = \"/Users/rsbear/dev/typefeel/components/shared/FollowButton.tsx\";\nvar __jsx = React.createElement;\nimport { jsx as ___EmotionJSX } from \"@emotion/core\";\nimport React, { useState } from \"react\";\nimport { Button } from \"../../styles/buttons\";\nimport { useFollowKeyboardMutation, useFollowKeyboardDeleteMutation } from \"../../generated/graphql\";\n\nvar FollowButton = function FollowButton(_ref) {\n  var keyboardId = _ref.keyboardId,\n      follows = _ref.follows;\n\n  var _useState = useState(false),\n      following = _useState[0],\n      setFollowing = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      followId = _useState2[0],\n      setFollowId = _useState2[1];\n\n  var _useFollowKeyboardMut = useFollowKeyboardMutation(),\n      _useFollowKeyboardMut2 = _slicedToArray(_useFollowKeyboardMut, 1),\n      followMut = _useFollowKeyboardMut2[0];\n\n  var _useFollowKeyboardDel = useFollowKeyboardDeleteMutation(),\n      _useFollowKeyboardDel2 = _slicedToArray(_useFollowKeyboardDel, 1),\n      unfollowMut = _useFollowKeyboardDel2[0];\n\n  React.useEffect(function () {\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = _getIterator(follows), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var k = _step.value;\n\n        if (k.keyboard.id === keyboardId) {\n          setFollowing(true);\n          setFollowId(k.id);\n        } else {\n          setFollowing(false);\n          setFollowId(\"\");\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n          _iterator[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  }, []);\n\n  var handleFollow =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(e) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.prev = 1;\n              _context.next = 4;\n              return followMut({\n                variables: {\n                  id: keyboardId\n                }\n              });\n\n            case 4:\n              setFollowing(true);\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 7]]);\n    }));\n\n    return function handleFollow(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleUnfollow =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(e) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              _context2.prev = 1;\n              _context2.next = 4;\n              return unfollowMut({\n                variables: {\n                  id: followId\n                }\n              });\n\n            case 4:\n              setFollowing(false);\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.log(_context2.t0);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 7]]);\n    }));\n\n    return function handleUnfollow(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return !following ? ___EmotionJSX(Button, {\n    secondary: \"true\",\n    onClick: function onClick(e) {\n      return handleFollow(e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"Follow \", ___EmotionJSX(\"i\", {\n    className: \"icon ion-ios-heart-empty\",\n    css: heartIcon,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  })) : ___EmotionJSX(Button, {\n    secondary: \"true\",\n    onClick: function onClick(e) {\n      return handleUnfollow(e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"Following \", ___EmotionJSX(\"i\", {\n    className: \"icon ion-ios-heart\",\n    css: heartIcon,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }));\n};\n\nexport default FollowButton;\nvar heartIcon = process.env.NODE_ENV === \"production\" ? {\n  name: \"1dm487z-heartIcon\",\n  styles: \"margin-left:5px;;label:heartIcon;\"\n} : {\n  name: \"1dm487z-heartIcon\",\n  styles: \"margin-left:5px;;label:heartIcon;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yc2JlYXIvZGV2L3R5cGVmZWVsL2NvbXBvbmVudHMvc2hhcmVkL0ZvbGxvd0J1dHRvbi50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBcUVxQiIsImZpbGUiOiIvVXNlcnMvcnNiZWFyL2Rldi90eXBlZmVlbC9jb21wb25lbnRzL3NoYXJlZC9Gb2xsb3dCdXR0b24udHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IEZDLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcInN0eWxlcy9idXR0b25zXCI7XG5pbXBvcnQge1xuICB1c2VGb2xsb3dLZXlib2FyZE11dGF0aW9uLFxuICB1c2VGb2xsb3dLZXlib2FyZERlbGV0ZU11dGF0aW9uXG59IGZyb20gXCJnZW5lcmF0ZWQvZ3JhcGhxbFwiO1xuaW1wb3J0IGNzcyBmcm9tIFwiQGVtb3Rpb24vY3NzXCI7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGtleWJvYXJkSWQ/OiBzdHJpbmc7XG4gIGZvbGxvd3M/OiBhbnk7XG59XG5cbmNvbnN0IEZvbGxvd0J1dHRvbjogRkM8UHJvcHM+ID0gKHsga2V5Ym9hcmRJZCwgZm9sbG93cyB9KSA9PiB7XG4gIGNvbnN0IFtmb2xsb3dpbmcsIHNldEZvbGxvd2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtmb2xsb3dJZCwgc2V0Rm9sbG93SWRdID0gdXNlU3RhdGUoXCJcIik7XG5cbiAgY29uc3QgW2ZvbGxvd011dF0gPSB1c2VGb2xsb3dLZXlib2FyZE11dGF0aW9uKCk7XG4gIGNvbnN0IFt1bmZvbGxvd011dF0gPSB1c2VGb2xsb3dLZXlib2FyZERlbGV0ZU11dGF0aW9uKCk7XG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBmb3IgKGxldCBrIG9mIGZvbGxvd3MpIHtcbiAgICAgIGlmIChrLmtleWJvYXJkLmlkID09PSBrZXlib2FyZElkKSB7XG4gICAgICAgIHNldEZvbGxvd2luZyh0cnVlKTtcbiAgICAgICAgc2V0Rm9sbG93SWQoay5pZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRGb2xsb3dpbmcoZmFsc2UpO1xuICAgICAgICBzZXRGb2xsb3dJZChcIlwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBoYW5kbGVGb2xsb3cgPSBhc3luYyBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGZvbGxvd011dCh7XG4gICAgICAgIHZhcmlhYmxlczogeyBpZDoga2V5Ym9hcmRJZCB9XG4gICAgICB9KTtcbiAgICAgIHNldEZvbGxvd2luZyh0cnVlKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVVuZm9sbG93ID0gYXN5bmMgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB1bmZvbGxvd011dCh7XG4gICAgICAgIHZhcmlhYmxlczogeyBpZDogZm9sbG93SWQgfVxuICAgICAgfSk7XG4gICAgICBzZXRGb2xsb3dpbmcoZmFsc2UpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuICFmb2xsb3dpbmcgPyAoXG4gICAgPEJ1dHRvbiBzZWNvbmRhcnk9XCJ0cnVlXCIgb25DbGljaz17ZSA9PiBoYW5kbGVGb2xsb3coZSl9PlxuICAgICAgRm9sbG93IDxpIGNsYXNzTmFtZT1cImljb24gaW9uLWlvcy1oZWFydC1lbXB0eVwiIGNzcz17aGVhcnRJY29ufSAvPlxuICAgIDwvQnV0dG9uPlxuICApIDogKFxuICAgIDxCdXR0b24gc2Vjb25kYXJ5PVwidHJ1ZVwiIG9uQ2xpY2s9e2UgPT4gaGFuZGxlVW5mb2xsb3coZSl9PlxuICAgICAgRm9sbG93aW5nIDxpIGNsYXNzTmFtZT1cImljb24gaW9uLWlvcy1oZWFydFwiIGNzcz17aGVhcnRJY29ufSAvPlxuICAgIDwvQnV0dG9uPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRm9sbG93QnV0dG9uO1xuXG5jb25zdCBoZWFydEljb24gPSBjc3NgXG4gIG1hcmdpbi1sZWZ0OiA1cHg7XG5gO1xuIl19 */\"\n};","map":{"version":3,"sources":["/Users/rsbear/dev/typefeel/components/shared/FollowButton.tsx"],"names":["React","useState","Button","useFollowKeyboardMutation","useFollowKeyboardDeleteMutation","FollowButton","keyboardId","follows","following","setFollowing","followId","setFollowId","followMut","unfollowMut","useEffect","k","keyboard","id","handleFollow","e","preventDefault","variables","console","log","handleUnfollow","heartIcon"],"mappings":"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","sourcesContent":["import React, { FC, useState } from \"react\";\nimport { Button } from \"styles/buttons\";\nimport {\n  useFollowKeyboardMutation,\n  useFollowKeyboardDeleteMutation\n} from \"generated/graphql\";\nimport css from \"@emotion/css\";\n\ninterface Props {\n  keyboardId?: string;\n  follows?: any;\n}\n\nconst FollowButton: FC<Props> = ({ keyboardId, follows }) => {\n  const [following, setFollowing] = useState(false);\n  const [followId, setFollowId] = useState(\"\");\n\n  const [followMut] = useFollowKeyboardMutation();\n  const [unfollowMut] = useFollowKeyboardDeleteMutation();\n\n  React.useEffect(() => {\n    for (let k of follows) {\n      if (k.keyboard.id === keyboardId) {\n        setFollowing(true);\n        setFollowId(k.id);\n      } else {\n        setFollowing(false);\n        setFollowId(\"\");\n      }\n    }\n  }, []);\n\n  const handleFollow = async e => {\n    e.preventDefault();\n    try {\n      await followMut({\n        variables: { id: keyboardId }\n      });\n      setFollowing(true);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleUnfollow = async e => {\n    e.preventDefault();\n    try {\n      await unfollowMut({\n        variables: { id: followId }\n      });\n      setFollowing(false);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return !following ? (\n    <Button secondary=\"true\" onClick={e => handleFollow(e)}>\n      Follow <i className=\"icon ion-ios-heart-empty\" css={heartIcon} />\n    </Button>\n  ) : (\n    <Button secondary=\"true\" onClick={e => handleUnfollow(e)}>\n      Following <i className=\"icon ion-ios-heart\" css={heartIcon} />\n    </Button>\n  );\n};\n\nexport default FollowButton;\n\nconst heartIcon = css`\n  margin-left: 5px;\n`;\n"]},"metadata":{},"sourceType":"module"}