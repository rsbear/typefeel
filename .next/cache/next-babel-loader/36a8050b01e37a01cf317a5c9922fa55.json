{"ast":null,"code":"import _css from \"@emotion/css\";\nvar _jsxFileName = \"/Users/rsbear/dev/typefeel/components/shared/FollowButton.tsx\";\nvar __jsx = React.createElement;\nimport { jsx as ___EmotionJSX } from \"@emotion/core\";\nimport React, { useState } from \"react\";\nimport { Button } from \"../../styles/buttons\";\nimport { useFollowKeyboardMutation, useFollowKeyboardDeleteMutation } from \"../../generated/graphql\";\n\nconst FollowButton = ({\n  keyboardId,\n  follows\n}) => {\n  const {\n    0: following,\n    1: setFollowing\n  } = useState(false);\n  const {\n    0: followId,\n    1: setFollowId\n  } = useState(\"\");\n  const [followMut] = useFollowKeyboardMutation();\n  const [unfollowMut] = useFollowKeyboardDeleteMutation();\n  React.useEffect(() => {\n    for (let k of follows) {\n      if (k.keyboard.id === keyboardId) {\n        setFollowing(true);\n        setFollowId(k.id);\n      } else {\n        setFollowing(false);\n        setFollowId(\"\");\n      }\n    }\n  }, []);\n\n  const handleFollow = async e => {\n    e.preventDefault();\n\n    try {\n      await followMut({\n        variables: {\n          id: keyboardId\n        }\n      });\n      setFollowing(true);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleUnfollow = async e => {\n    e.preventDefault();\n\n    try {\n      await unfollowMut({\n        variables: {\n          id: followId\n        }\n      });\n      setFollowing(false);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return !following ? ___EmotionJSX(Button, {\n    secondary: \"true\",\n    onClick: e => handleFollow(e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"Follow \", ___EmotionJSX(\"i\", {\n    className: \"icon ion-ios-heart-empty\",\n    css: heartIcon,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  })) : ___EmotionJSX(Button, {\n    secondary: \"true\",\n    onClick: e => handleUnfollow(e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"Following \", ___EmotionJSX(\"i\", {\n    className: \"icon ion-ios-heart\",\n    css: heartIcon,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }));\n};\n\nexport default FollowButton;\nconst heartIcon = process.env.NODE_ENV === \"production\" ? {\n  name: \"1dm487z-heartIcon\",\n  styles: \"margin-left:5px;;label:heartIcon;\"\n} : {\n  name: \"1dm487z-heartIcon\",\n  styles: \"margin-left:5px;;label:heartIcon;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yc2JlYXIvZGV2L3R5cGVmZWVsL2NvbXBvbmVudHMvc2hhcmVkL0ZvbGxvd0J1dHRvbi50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBcUVxQiIsImZpbGUiOiIvVXNlcnMvcnNiZWFyL2Rldi90eXBlZmVlbC9jb21wb25lbnRzL3NoYXJlZC9Gb2xsb3dCdXR0b24udHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IEZDLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcInN0eWxlcy9idXR0b25zXCI7XG5pbXBvcnQge1xuICB1c2VGb2xsb3dLZXlib2FyZE11dGF0aW9uLFxuICB1c2VGb2xsb3dLZXlib2FyZERlbGV0ZU11dGF0aW9uXG59IGZyb20gXCJnZW5lcmF0ZWQvZ3JhcGhxbFwiO1xuaW1wb3J0IGNzcyBmcm9tIFwiQGVtb3Rpb24vY3NzXCI7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGtleWJvYXJkSWQ/OiBzdHJpbmc7XG4gIGZvbGxvd3M/OiBhbnk7XG59XG5cbmNvbnN0IEZvbGxvd0J1dHRvbjogRkM8UHJvcHM+ID0gKHsga2V5Ym9hcmRJZCwgZm9sbG93cyB9KSA9PiB7XG4gIGNvbnN0IFtmb2xsb3dpbmcsIHNldEZvbGxvd2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtmb2xsb3dJZCwgc2V0Rm9sbG93SWRdID0gdXNlU3RhdGUoXCJcIik7XG5cbiAgY29uc3QgW2ZvbGxvd011dF0gPSB1c2VGb2xsb3dLZXlib2FyZE11dGF0aW9uKCk7XG4gIGNvbnN0IFt1bmZvbGxvd011dF0gPSB1c2VGb2xsb3dLZXlib2FyZERlbGV0ZU11dGF0aW9uKCk7XG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBmb3IgKGxldCBrIG9mIGZvbGxvd3MpIHtcbiAgICAgIGlmIChrLmtleWJvYXJkLmlkID09PSBrZXlib2FyZElkKSB7XG4gICAgICAgIHNldEZvbGxvd2luZyh0cnVlKTtcbiAgICAgICAgc2V0Rm9sbG93SWQoay5pZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRGb2xsb3dpbmcoZmFsc2UpO1xuICAgICAgICBzZXRGb2xsb3dJZChcIlwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBoYW5kbGVGb2xsb3cgPSBhc3luYyBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGZvbGxvd011dCh7XG4gICAgICAgIHZhcmlhYmxlczogeyBpZDoga2V5Ym9hcmRJZCB9XG4gICAgICB9KTtcbiAgICAgIHNldEZvbGxvd2luZyh0cnVlKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVVuZm9sbG93ID0gYXN5bmMgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB1bmZvbGxvd011dCh7XG4gICAgICAgIHZhcmlhYmxlczogeyBpZDogZm9sbG93SWQgfVxuICAgICAgfSk7XG4gICAgICBzZXRGb2xsb3dpbmcoZmFsc2UpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuICFmb2xsb3dpbmcgPyAoXG4gICAgPEJ1dHRvbiBzZWNvbmRhcnk9XCJ0cnVlXCIgb25DbGljaz17ZSA9PiBoYW5kbGVGb2xsb3coZSl9PlxuICAgICAgRm9sbG93IDxpIGNsYXNzTmFtZT1cImljb24gaW9uLWlvcy1oZWFydC1lbXB0eVwiIGNzcz17aGVhcnRJY29ufSAvPlxuICAgIDwvQnV0dG9uPlxuICApIDogKFxuICAgIDxCdXR0b24gc2Vjb25kYXJ5PVwidHJ1ZVwiIG9uQ2xpY2s9e2UgPT4gaGFuZGxlVW5mb2xsb3coZSl9PlxuICAgICAgRm9sbG93aW5nIDxpIGNsYXNzTmFtZT1cImljb24gaW9uLWlvcy1oZWFydFwiIGNzcz17aGVhcnRJY29ufSAvPlxuICAgIDwvQnV0dG9uPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRm9sbG93QnV0dG9uO1xuXG5jb25zdCBoZWFydEljb24gPSBjc3NgXG4gIG1hcmdpbi1sZWZ0OiA1cHg7XG5gO1xuIl19 */\"\n};","map":{"version":3,"sources":["/Users/rsbear/dev/typefeel/components/shared/FollowButton.tsx"],"names":["React","useState","Button","useFollowKeyboardMutation","useFollowKeyboardDeleteMutation","FollowButton","keyboardId","follows","following","setFollowing","followId","setFollowId","followMut","unfollowMut","useEffect","k","keyboard","id","handleFollow","e","preventDefault","variables","err","console","log","handleUnfollow","heartIcon"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,MAAT;AACA,SACEC,yBADF,EAEEC,+BAFF;;AAWA,MAAMC,YAAuB,GAAG,CAAC;AAAEC,EAAAA,UAAF;AAAcC,EAAAA;AAAd,CAAD,KAA6B;AAC3D,QAAM;AAAA,OAACC,SAAD;AAAA,OAAYC;AAAZ,MAA4BR,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM;AAAA,OAACS,QAAD;AAAA,OAAWC;AAAX,MAA0BV,QAAQ,CAAC,EAAD,CAAxC;AAEA,QAAM,CAACW,SAAD,IAAcT,yBAAyB,EAA7C;AACA,QAAM,CAACU,WAAD,IAAgBT,+BAA+B,EAArD;AAEAJ,EAAAA,KAAK,CAACc,SAAN,CAAgB,MAAM;AACpB,SAAK,IAAIC,CAAT,IAAcR,OAAd,EAAuB;AACrB,UAAIQ,CAAC,CAACC,QAAF,CAAWC,EAAX,KAAkBX,UAAtB,EAAkC;AAChCG,QAAAA,YAAY,CAAC,IAAD,CAAZ;AACAE,QAAAA,WAAW,CAACI,CAAC,CAACE,EAAH,CAAX;AACD,OAHD,MAGO;AACLR,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACAE,QAAAA,WAAW,CAAC,EAAD,CAAX;AACD;AACF;AACF,GAVD,EAUG,EAVH;;AAYA,QAAMO,YAAY,GAAG,MAAMC,CAAN,IAAW;AAC9BA,IAAAA,CAAC,CAACC,cAAF;;AACA,QAAI;AACF,YAAMR,SAAS,CAAC;AACdS,QAAAA,SAAS,EAAE;AAAEJ,UAAAA,EAAE,EAAEX;AAAN;AADG,OAAD,CAAf;AAGAG,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACD,KALD,CAKE,OAAOa,GAAP,EAAY;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD;AACF,GAVD;;AAYA,QAAMG,cAAc,GAAG,MAAMN,CAAN,IAAW;AAChCA,IAAAA,CAAC,CAACC,cAAF;;AACA,QAAI;AACF,YAAMP,WAAW,CAAC;AAChBQ,QAAAA,SAAS,EAAE;AAAEJ,UAAAA,EAAE,EAAEP;AAAN;AADK,OAAD,CAAjB;AAGAD,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KALD,CAKE,OAAOa,GAAP,EAAY;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD;AACF,GAVD;;AAYA,SAAO,CAACd,SAAD,GACL,cAAC,MAAD;AAAQ,IAAA,SAAS,EAAC,MAAlB;AAAyB,IAAA,OAAO,EAAEW,CAAC,IAAID,YAAY,CAACC,CAAD,CAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACS;AAAG,IAAA,SAAS,EAAC,0BAAb;AAAwC,IAAA,GAAG,EAAEO,SAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADT,CADK,GAKL,cAAC,MAAD;AAAQ,IAAA,SAAS,EAAC,MAAlB;AAAyB,IAAA,OAAO,EAAEP,CAAC,IAAIM,cAAc,CAACN,CAAD,CAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACY;AAAG,IAAA,SAAS,EAAC,oBAAb;AAAkC,IAAA,GAAG,EAAEO,SAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADZ,CALF;AASD,CApDD;;AAsDA,eAAerB,YAAf;AAEA,MAAMqB,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAf","sourcesContent":["import React, { FC, useState } from \"react\";\nimport { Button } from \"styles/buttons\";\nimport {\n  useFollowKeyboardMutation,\n  useFollowKeyboardDeleteMutation\n} from \"generated/graphql\";\nimport css from \"@emotion/css\";\n\ninterface Props {\n  keyboardId?: string;\n  follows?: any;\n}\n\nconst FollowButton: FC<Props> = ({ keyboardId, follows }) => {\n  const [following, setFollowing] = useState(false);\n  const [followId, setFollowId] = useState(\"\");\n\n  const [followMut] = useFollowKeyboardMutation();\n  const [unfollowMut] = useFollowKeyboardDeleteMutation();\n\n  React.useEffect(() => {\n    for (let k of follows) {\n      if (k.keyboard.id === keyboardId) {\n        setFollowing(true);\n        setFollowId(k.id);\n      } else {\n        setFollowing(false);\n        setFollowId(\"\");\n      }\n    }\n  }, []);\n\n  const handleFollow = async e => {\n    e.preventDefault();\n    try {\n      await followMut({\n        variables: { id: keyboardId }\n      });\n      setFollowing(true);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleUnfollow = async e => {\n    e.preventDefault();\n    try {\n      await unfollowMut({\n        variables: { id: followId }\n      });\n      setFollowing(false);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return !following ? (\n    <Button secondary=\"true\" onClick={e => handleFollow(e)}>\n      Follow <i className=\"icon ion-ios-heart-empty\" css={heartIcon} />\n    </Button>\n  ) : (\n    <Button secondary=\"true\" onClick={e => handleUnfollow(e)}>\n      Following <i className=\"icon ion-ios-heart\" css={heartIcon} />\n    </Button>\n  );\n};\n\nexport default FollowButton;\n\nconst heartIcon = css`\n  margin-left: 5px;\n`;\n"]},"metadata":{},"sourceType":"module"}